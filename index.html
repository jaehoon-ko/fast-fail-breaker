<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>í•­ìƒ ë¹›ë‚˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„ - ë°©í•´ìš”ì¸ ë¶€ìˆ˜ê¸° ê²Œì„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #111827;
      padding: 16px;
    }

    .game-wrapper {
      position: relative;
      background: #0b1120;
      border-radius: 20px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.55);
      padding: 20px 18px 18px;
      width: 100%;
      max-width: 520px;
      border: 1px solid #1f2937;
      color: #e5e7eb;
      overflow: hidden;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 10px;
      border-radius: 999px;
      background: rgba(248, 113, 113, 0.15);
      color: #fecaca;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .title {
      font-size: 18px;
      font-weight: 700;
      color: #f9fafb;
    }

    .subtitle {
      font-size: 12px;
      color: #9ca3af;
    }

    .timer-block {
      text-align: right;
      font-size: 12px;
    }

    .timer-label {
      color: #9ca3af;
      font-size: 11px;
    }

    .timer {
      font-weight: 700;
      font-size: 16px;
      color: #f97316;
    }

    .best-time {
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    .grid-wrapper {
      margin-top: 10px;
      padding: 10px;
      border-radius: 14px;
      background: radial-gradient(circle at top, #111827 0, #020617 55%);
      border: 1px solid #1f2937;
    }

    .grid-title {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .grid-title strong {
      color: #f9fafb;
    }

    .hint {
      font-size: 10px;
      color: #6b7280;
    }

    .brick-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }

    /* ë²½ëŒ í•˜ë‚˜ */
    .brick {
      position: relative;
      background: linear-gradient(145deg, #b91c1c, #7f1d1d);
      border-radius: 6px;
      padding: 10px 8px;
      cursor: pointer;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      min-height: 68px;
      box-shadow: 0 2px 0 rgba(0,0,0,0.6);
      transition: transform 0.06s ease, box-shadow 0.06s ease, background 0.2s ease, opacity 0.25s ease;
      border: 1px solid rgba(0,0,0,0.7);
    }

    .brick::before {
      /* ë²½ëŒ í‘œë©´ í…ìŠ¤ì²˜ */
      content: "";
      position: absolute;
      inset: 0;
      background-image: linear-gradient(
          to right,
          rgba(0,0,0,0.08) 0,
          rgba(0,0,0,0.08) 1px,
          transparent 1px,
          transparent 100%
        ),
        linear-gradient(
          to bottom,
          rgba(0,0,0,0.15) 0,
          rgba(0,0,0,0.15) 1px,
          transparent 1px,
          transparent 100%
        );
      background-size: 24px 100%, 100% 16px;
      opacity: 0.35;
      pointer-events: none;
    }

    .brick-label {
      position: relative;
      z-index: 1;
      font-size: 12px;
      font-weight: 600;
      color: #fee2e2;
      line-height: 1.3;
    }

    /* í´ë¦­ ì¤‘ íš¨ê³¼ */
    .brick:active {
      transform: translateY(1px);
      box-shadow: 0 0 0 rgba(0,0,0,0.5);
    }

    /* ê¹¨ì§€ê¸° ì§ì „ ì•½ê°„ í”ë“¤ë¦¬ëŠ” ëŠë‚Œì„ ì¤„ ìˆ˜ë„ ìˆìŒ(ì„ íƒ) */
    .brick.hit {
      animation: brickHit 0.12s ease;
    }

    @keyframes brickHit {
      0% { transform: translateY(0); }
      50% { transform: translateY(1px); }
      100% { transform: translateY(0); }
    }

    /* ê¹¨ì§ˆ ë•Œ ì• ë‹ˆë©”ì´ì…˜ */
    .brick.broken {
      pointer-events: none;
      animation: brickBreak 0.45s forwards ease-out;
    }

    @keyframes brickBreak {
      0% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
        box-shadow: 0 2px 0 rgba(0,0,0,0.6);
      }
      40% {
        transform: scale(1.02) rotate(-2deg);
        opacity: 0.9;
      }
      60% {
        transform: scale(0.97) rotate(2deg);
        opacity: 0.7;
      }
      100% {
        transform: scale(0.85) translateY(6px);
        opacity: 0;
        box-shadow: 0 0 0 rgba(0,0,0,0);
      }
    }

    .result {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 10px;
      min-height: 18px;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-top: 8px;
    }

    button {
      border-radius: 999px;

border: none;
      padding: 7px 12px;
      font-size: 12px;
      cursor: pointer;
      font-weight: 600;
    }

    .reset-btn {
      background: #1f2937;
      color: #e5e7eb;
    }

    .clear-best-btn {
      background: rgba(248, 113, 113, 0.2);
      color: #fecaca;
    }

    button:hover {
      opacity: 0.9;
    }

    /* ì˜¤ë²„ë ˆì´: ëª¨ë“  ë²½ëŒì´ ê¹¨ì¡Œì„ ë•Œ "ë¹ ë¥¸ ì‹¤í–‰!" */
    .overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

.overlay.show {
      opacity: 1;
    }

    .overlay-badge {
      padding: 14px 20px;
      border-radius: 999px;
      background: rgba(251, 113, 133, 0.14);
      border: 1px solid rgba(248, 113, 113, 0.8);
      backdrop-filter: blur(14px);
      color: #fecaca;
      font-size: 17px;
      font-weight: 800;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      box-shadow: 0 12px 35px rgba(0,0,0,0.7);
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .overlay-badge span.icon {
      font-size: 18px;
    }

    @media (max-width: 480px) {
      .game-wrapper {
        padding: 16px 14px 14px;
      }
      .title {
        font-size: 16px;
      }
      .brick {
        min-height: 60px;
        padding: 8px 6px;
      }
      .brick-label {
        font-size: 11px;
      }
    }
  </style>
</head>
<body>
  <div class="game-wrapper">
    <div class="overlay" id="overlay">
      <div class="overlay-badge">
        <span class="icon">âš¡ï¸</span>
        ë¹ ë¥¸ ì‹¤í–‰!
      </div>
    </div>

    <div class="game-header">
      <div class="title-block">
        <div class="pill">FAST FAIL PRACTICE</div>
        <div class="title">ë°©í•´ìš”ì¸ ë¶€ìˆ˜ê¸° ê²Œì„</div>
        <div class="subtitle">
          ë¹ ë¥¸ ì‹¤í–‰Â·ë¹ ë¥¸ ì‹¤íŒ¨ë¥¼ ë§‰ëŠ” 9ê°œì˜ ë²½ëŒì„<br />
          í´ë¦­í•´ì„œ ë¶€ìˆ´ë³´ì„¸ìš”. (ê° ë²½ëŒ 25í´ë¦­)
        </div>
      </div>
      <div class="timer-block">
        <div class="timer-label">í˜„ì¬ ê¸°ë¡</div>
        <div class="timer" id="timer">0.00s</div>
        <div class="best-time" id="bestTimeLabel">ìµœê³  ê¸°ë¡: -</div>
      </div>
    </div>

    <div class="grid-wrapper">
      <div class="grid-title">
        <span><strong>ë°©í•´ìš”ì¸ 9ê°œ</strong>ë¥¼ ëª¨ë‘ ë¶€ìˆ´ë³´ì„¸ìš”</span>
        <span class="hint">í´ë¦­ ìˆ˜ëŠ” ë³´ì´ì§€ ì•Šì§€ë§Œ, 25ë²ˆì´ë©´ ê¹¨ì ¸ìš”!</span>
      </div>
      <div class="brick-grid" id="blockGrid"></div>
    </div>

    <div class="result" id="resultMsg"></div>

    <div class="controls">
      <button class="reset-btn" id="restartBtn">ë‹¤ì‹œ ì‹œì‘</button>
      <button class="clear-best-btn" id="clearBestBtn">ìµœê³  ê¸°ë¡ ì´ˆê¸°í™”</button>
    </div>
  </div>

  <script>
    // ë¸”ë¡ ë¼ë²¨ (ìµœì‹  ë²„ì „)
    const blockLabels = [
      "ì™„ë²½ì£¼ì˜",
      "ëì—†ëŠ” íšŒì˜",
      "ìƒˆë¡œì›€ì— ëŒ€í•œ ë¶€ì •ì ì¸ í”¼ë“œë°±",
      "ì‹¤íŒ¨ì— ëŒ€í•œ ë‘ë ¤ì›€",
      "ëì—†ëŠ” ì„¤ë“",
      "ì±…ì„ì— ëŒ€í•œ ë¶€ë‹´",
      "ë ˆí¼ëŸ°ìŠ¤ ì—†ìœ¼ë©´ ì•ˆë¼",
      "ê³ ê°ë³´ë‹¤ ë‚´ë¶€ ì‚¬ì • ìš°ì„ ",
      "â€œë‚˜ì¤‘ì— í•˜ìâ€ ìŠµê´€"
    ];

    // ì„¤ì •ê°’
    const CLICKS_TO_BREAK = 25; // ğŸ‘‰ 50 â†’ 25ë¡œ ì¤„ì„
    const BEST_KEY = "fastFailBreaker_bestTime_v2";

    const gridEl = document.getElementById("blockGrid");
    const timerEl = document.getElementById("timer");
    const resultEl = document.getElementById("resultMsg");
    const bestTimeLabel = document.getElementById("bestTimeLabel");
    const restartBtn = document.getElementById("restartBtn");
    const clearBestBtn = document.getElementById("clearBestBtn");
    const overlayEl = document.getElementById("overlay");

    let bricks = [];
    let startTime = null;
    let timerInterval = null;
    let gameFinished = false;

    function loadBestTime() {
      const best = localStorage.getItem(BEST_KEY);
      if (best) {
        bestTimeLabel.textContent = `ìµœê³  ê¸°ë¡: ${Number(best).toFixed(2)}s`;
      } else {
        bestTimeLabel.textContent = "ìµœê³  ê¸°ë¡: -";
      }
    }

    function startTimer() {
      if (startTime !== null) return;
      startTime = performance.now();
      timerInterval = setInterval(() => {
        if (startTime === null) return;
        const elapsed = (performance.now() - startTime) / 1000;
        timerEl.textContent = `${elapsed.toFixed(2)}s`;
      }, 40);
    }

    function stopTimer() {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
    }

    function checkAllBroken() {
      return bricks.every(b => b.clicks >= CLICKS_TO_BREAK);
    }

    function initGame() {
      stopTimer();
      startTime = null;
      gameFinished = false;
      timerEl.textContent = "0.00s";
      resultEl.textContent = "";
      overlayEl.classList.remove("show");

      gridEl.innerHTML = "";
      bricks = [];

      blockLabels.forEach((label, idx) => {
        const brickEl = document.createElement("div");
        brickEl.className = "brick";
        brickEl.dataset.index = idx;

        brickEl.innerHTML = `
          <div class="brick-label">${label}</div>
        `;

        const brickObj = {
          el: brickEl,
          labelEl: brickEl.querySelector(".brick-label"),
          clicks: 0
        };

        brickEl.addEventListener("click", () => handleBrickClick(brickObj));

        bricks.push(brickObj);
        gridEl.appendChild(brickEl);
      });

      loadBestTime();
    }

    function handleBrickClick(brickObj) {
      if (gameFinished) return;

      startTimer();

      if (brickObj.clicks >= CLICKS_TO_BREAK) return;

      brickObj.clicks += 1;

      // ì‚´ì§ í”¼ë“œë°± ì• ë‹ˆë©”ì´ì…˜
      brickObj.el.classList.remove("hit");
      void brickObj.el.offsetWidth; // reflow for restart animation
      brickObj.el.classList.add("hit");

      if (brickObj.clicks >= CLICKS_TO_BREAK) {
        brickObj.el.classList.remove("hit");
        brickObj.el.classList.add("broken");

        if (checkAllBroken()) {
          finishGame();
        }
      }
    }

    function finishGame() {
      gameFinished = true;
      stopTimer();

      const elapsed = (performance.now() - startTime) / 1000;
      const elapsedFixed = elapsed.toFixed(2);
      resultEl.textContent = `ğŸ‰ ëª¨ë“  ë°©í•´ìš”ì¸ì„ ë¶€ì‰ˆìŠµë‹ˆë‹¤! ê¸°ë¡: ${elapsedFixed}s`;

      const best = localStorage.getItem(BEST_KEY);
      if (!best || elapsed < Number(best)) {
        localStorage.setItem(BEST_KEY, elapsed);
        bestTimeLabel.textContent = `ìµœê³  ê¸°ë¡: ${elapsedFixed}s (ì‹ ê¸°ë¡!)`;
        resultEl.textContent += "  ğŸ† ì‹ ê¸°ë¡ ë‹¬ì„±!";
      }

      // "ë¹ ë¥¸ ì‹¤í–‰!" ì˜¤ë²„ë ˆì´ í‘œì‹œ
      overlayEl.classList.add("show");
    }

    restartBtn.addEventListener("click", initGame);

    clearBestBtn.addEventListener("click", () => {
      localStorage.removeItem(BEST_KEY);
      loadBestTime();
      resultEl.textContent = "ìµœê³  ê¸°ë¡ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.";
    });

    initGame();
  </script>
</body>
</html>
